// This file is part of Indico.
// Copyright (C) 2002 - 2023 CERN
//
// Indico is free software; you can redistribute it and/or
// modify it under the terms of the MIT License; see the
// LICENSE file for more details.

@use './utilities' as *;
@use './flex' as *;

body {
  @extend .flexcol;
  overflow-x: inherit;
}

body > .main {
  flex-grow: 1;
}

/* Work around issues in WebKit (used by Safari) which shrinks the contained
 * elements instead of growing the container. The following prevents the
 * children of the flexbox to be shrinked which is ok since we want the page to
 * scroll anyway. */
body > * {
  flex-shrink: 0;
}

.fixed-width {
  max-width: px(800) !important;
}

.full-width-content-wrapper {
  .management-page > .page-content {
    max-width: 100% !important;
  }
}

.layout-wrapper {
  .row {
    .column {
      box-sizing: border-box;
      float: left;
      padding: 0 1em 0 1em;

      &.col-40 {
        width: 40%;
      }

      &.col-50 {
        width: 50%;
      }

      &.col-60 {
        width: 60%;
      }

      &.col-full {
        width: 100%;
      }

      &:first-of-type {
        padding-left: 0;
      }

      &:last-of-type {
        padding-right: 0;
      }
    }

    &::after {
      // same as .clearfix
      content: '.';
      display: block;
      height: 0;
      clear: both;
      visibility: hidden;
    }
  }
}

.layout-side-menu {
  @extend .flexrow;
  min-height: 100%;
  margin-left: px(30);
  margin-right: px(30);

  &:first-of-type {
    margin-top: px(20);
  }

  .banner {
    > .menu-column {
      flex-grow: 0;
      width: px(200);
      margin-left: px(30);
      margin-right: px(30);
    }

    > .page-column {
      flex-grow: 1;
    }

    .action-menu {
      flex-shrink: 0;
      margin-top: -0.5%;
    }
  }

  > .menu-column {
    width: px(200);
    margin-right: px(30);

    .group:first-child {
      margin-top: px(5);
      margin-bottom: px(23);

      a {
        width: 100%;
        padding: px(5) px(5) px(5) px(26);
        text-align: left;

        span {
          @include ellipsis();
        }
      }
    }
  }

  > .content-column {
    flex-grow: 1;
    width: 0;
  }

  .side-menu-label {
    @include ellipsis();
    margin-right: 0.5rem;

    & + .badge {
      // keep some space on the right in case the label is too long
      margin-right: 0.5em;
    }
  }
}

@mixin clearfix() {
  overflow: hidden;
}
