// This file is part of Indico.
// Copyright (C) 2002 - 2023 CERN
//
// Indico is free software; you can redistribute it and/or
// modify it under the terms of the MIT License; see the
// LICENSE file for more details.

@use 'base' as *;

$image-preview-width: 120;
$image-preview-margin: 16;
$dropzone-padding: 20;
$dropzone-border-width: 2;

.dropzone {
  border-radius: px(2);
  border: px(2) dashed $dark-blue;
  padding: px(30) px(20);
  margin-bottom: 3em;
  width: (
      ($dropzone-padding + $dropzone-border-width) * 2 +
        ($image-preview-width + ($image-preview-margin * 2)) * 5
    ) * px(1);
  cursor: pointer;

  .dz-preview.dz-file-preview .dz-image,
  .dz-preview .dz-image {
    border-radius: px(5);

    > img {
      object-fit: cover;
      width: px(120);
      height: px(120);
    }
  }

  .dz-message {
    font-size: 1.5em;
    color: $dark-gray;
    margin: 0 0 1em 0;

    .message-separator {
      display: block;
      margin-top: 1em;
      font-size: small;
    }
  }

  .select-files-btn {
    text-align: center;
    cursor: pointer;

    .i-button {
      cursor: pointer;
    }

    .dz-message {
      margin: 1em 0 0 0;
    }
  }
}

.form-group {
  .form-field.fit-to-parent .dropzone {
    width: 100%;
  }

  .dropzone {
    padding: 0;
    margin-bottom: 1em;
    width: px(400);
    display: table;

    .dropzone-inner {
      display: table-row;

      .dropzone-previews {
        display: table-cell;
        text-align: center;

        .dz-message {
          display: none;
        }
      }

      .select-files-btn {
        display: table-cell;
        vertical-align: middle;
        text-align: center;

        button {
          margin: $image-preview-margin * px(1);
          height: inherit;
        }
      }
    }

    &.thin {
      min-height: inherit;

      .dropzone-inner {
        display: block;
        padding: px(10);
      }

      .dropzone-previews {
        display: block;
        text-align: left;
      }

      .dz-preview {
        display: flex;
        min-height: inherit;
        margin: 0 0 px(5) 0;

        &:hover {
          @include transition(background-color 0.2s);
          background-color: $light-gray;
        }
      }

      .dz-details {
        opacity: 1;
        font-size: 1em;
        padding: 0;
        text-align: inherit;
        color: $black;
        min-width: inherit;
        position: inherit;
        flex-grow: 1;
        cursor: inherit;
        width: px(300);
      }

      .select-files-btn {
        display: block;

        button {
          margin: px(5) 0 0 0;
        }
      }

      .dz-message {
        font-size: 1em;
        margin: 0;
      }

      .message-separator {
        font-size: 1em;
        margin-top: 0;
      }

      .dz-filename {
        span:hover {
          @include transition(background-color 0.2s);
          background-color: $light-gray;
          border-color: transparent;
        }

        &:hover {
          span {
            @include transition(background-color 0.2s);
            background-color: $light-gray;
            border-color: transparent;
          }
        }
      }

      .dz-remove {
        margin-left: px(5);
        color: $link;

        i::before {
          cursor: pointer;
        }

        &:hover {
          color: $bright-orange;
          text-decoration: initial;
        }
      }
    }
  }
}

.dropzone-upload-btn {
  text-align: right;
}
